import 'package:cloud_firestore/cloud_firestore.dart';import 'package:driver/widgets/alert.dart';import 'package:driver/widgets/app_toast.dart';import 'package:firebase_auth/firebase_auth.dart';import 'package:flutter/material.dart';class FirebaseCarRentController {  static final _auth = FirebaseAuth.instance;  static final _firestore = FirebaseFirestore.instance;  //send request to vendor  static Future<bool> sendRequest({required Map<String, dynamic> data, required BuildContext context})async{    try{      User? user = _auth.currentUser;      print("user: ${user!.email}");      //get driver profile first      DocumentSnapshot<Map<String, dynamic>> driverProfile = await _firestore.collection("drivers_profile").doc(user!.email).get();      print("driverProfile: ${driverProfile.data()}");      //now send request to vendor      if(driverProfile.exists) { //if driver profile exists        if (driverProfile.data()!["email_verify"] !=            "1") { //if vendor email is not exists          AppToast(text: "You must need verify your email", color: Colors.red);          return false;        } else if (driverProfile.data()!["phone_verify"] !=            "1") { //if vendor phone is not exists          AppToast(text: "You must need verify your phone", color: Colors.red);          return false;        }else if(driverProfile.data()!["account_verify"] != "1"){          AppToast(text: "You must need to Upload Your Documents", color: Colors.red);          return false;        } else {          //send request to vendor          await _firestore.collection("vendor_request").doc(              driverProfile.data()!["vendor_email"]).set({            "driver": driverProfile.data(), //driver info            "vendor": data["vendor_info"],            "car" : data["car_info"]          });          AppToast(text: "Your request has been send to this Vehicles Owner", color: Colors.green);          //show a success message          AppAler.showMyDialog(message: "Your request has been send to this Vehicles Owner", context: context); //show a success message          ///TODO: send notification to vendor          ///TODO: send notification to driver          ///TODO: send notification to admin          return true;        }      }else{        AppToast(text: "You must need to complete your profile", color: Colors.red);        return false;      }    }catch(e){      return false;    }  }}